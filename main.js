// Підключаю вбудований модуль Node.js для роботи з файловою системою
const fs = require('fs');
// Підключаю встановлену бібліотеку commander для роботи з аргументами командного рядка
const { program } = require('commander');

// Описую опції (параметри), які може приймати наша програма
program
  .option('-i, --input <type>', 'шлях до вхідного файлу (обов\'язковий параметр)')
  .option('-o, --output <type>', 'шлях до файлу для збереження результату')
  .option('-d, --display', 'вивести результат у консоль');

// Парсимо аргументи, передані при запуску програми
program.parse(process.argv);

// Отримую об'єкт з опціями, які передав користувач
const options = program.opts();

// --- ВАЛІДАЦІЯ АРГУМЕНТІВ ---

// 1. Перевірка наявності обов'язкового параметра --input
if (!options.input) {
  // Виводжу текст помилки згідно з вимогами
  console.error('Error: Please, specify input file');
  // Зупиняю виконання програми з кодом помилки
  process.exit(1);
}

// 2. Перевірка, чи існує вхідний файл
try {
  // fs.accessSync перевіряє доступність файлу. Якщо його немає, вона викидає помилку.
  fs.accessSync(options.input, fs.constants.R_OK);
} catch (error) {
  // Виводжу текст помилки згідно з вимогами
  console.error(`Error: Cannot find input file`);
  process.exit(1);
}

console.log('Перевірка аргументів пройшла успішно. Вхідний файл знайдено.');

